<!DOCTYPE html>
<html lang="id" xmlns:th="http://www.thymeleaf.org" 
      th:replace="~{layouts/base :: layout(~{::title}, ~{::section}, ~{::script})}">
<head>
    <title>Beranda - Dashboard</title>
</head>
<body>

    <section>
        <div class="container">
            
            <!-- WELCOME JIKA BELUM LOGIN -->
            <div th:if="${user == null}" class="text-center py-5">
                <div class="py-5">
                    <div class="mb-4">
                        <span class="badge bg-primary-subtle text-primary rounded-pill px-3 py-2 mb-3">Versi 2.0</span>
                        <h1 class="display-4 fw-bold text-dark mb-3">Manajemen Toko <br><span class="text-primary">Lebih Mudah</span></h1>
                        <p class="lead text-muted mx-auto" style="max-width: 600px;">
                            Pantau stok, analisis penjualan, dan kelola produk Anda dalam satu aplikasi yang cepat dan modern.
                        </p>
                    </div>
                    <div class="d-flex justify-content-center gap-3">
                        <a th:href="@{/auth/login}" class="btn btn-primary btn-lg px-5 rounded-pill shadow-lg">Masuk</a>
                        <a th:href="@{/auth/register}" class="btn btn-white border btn-lg px-5 rounded-pill shadow-sm">Daftar</a>
                    </div>
                </div>
            </div>

            <!-- DASHBOARD SETELAH LOGIN -->
            <div th:if="${user != null}">
                <div class="mb-5">
                    <h2 class="fw-bold">Selamat Datang, <span class="text-primary" th:text="${user.name}">User</span>! ðŸ‘‹</h2>
                    <p class="text-muted">Berikut adalah ringkasan performa toko Anda hari ini.</p>
                </div>

                <div class="row g-4 mb-5">
                    <!-- Card 1 -->
                    <div class="col-md-4">
                        <div class="card h-100 p-3 border-0 bg-primary text-white position-relative overflow-hidden" style="transition: .3s; cursor: pointer;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                            <div class="card-body position-relative z-1">
                                <h6 class="opacity-75 text-uppercase small ls-1">Total Produk</h6>
                                <h2 class="display-5 fw-bold mt-2" th:text="${totalProducts}">0</h2>
                                <a th:href="@{/products}" class="text-white text-decoration-none small stretched-link">Lihat Detail <i class="fas fa-arrow-right ms-1"></i></a>
                            </div>
                            <i class="fas fa-box position-absolute opacity-25" style="font-size: 8rem; right: -20px; bottom: -30px; transform: rotate(-15deg);"></i>
                        </div>
                    </div>

                    <!-- Card 2 -->
                    <div class="col-md-4">
                        <div class="card h-100 p-3 border-0 bg-dark text-white position-relative overflow-hidden" style="transition: .3s;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                            <div class="card-body position-relative z-1">
                                <h6 class="opacity-75 text-uppercase small ls-1">Kategori</h6>
                                <h2 class="display-5 fw-bold mt-2" th:text="${totalCategories}">0</h2>
                                <a th:href="@{/products/chart}" class="text-white text-decoration-none small stretched-link">Lihat Analisis <i class="fas fa-chart-pie ms-1"></i></a>
                            </div>
                            <i class="fas fa-layer-group position-absolute opacity-25" style="font-size: 8rem; right: -20px; bottom: -30px; transform: rotate(-15deg);"></i>
                        </div>
                    </div>

                    <!-- Card 3 -->
                    <div class="col-md-4">
                        <div class="card h-100 p-3 border-0 bg-white text-dark shadow-sm position-relative overflow-hidden" style="transition: .3s;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                            <div class="card-body position-relative z-1">
                                <h6 class="text-muted text-uppercase small ls-1">Estimasi Aset</h6>
                                <h2 class="display-6 fw-bold mt-2 text-success" th:text="'Rp ' + ${#numbers.formatDecimal(totalAssetValue, 0, 'COMMA', 0, 'POINT')}">Rp 0</h2>
                                <small class="text-muted">Total valuasi stok gudang</small>
                            </div>
                            <div class="position-absolute top-0 end-0 p-3">
                                <div class="bg-success-subtle p-3 rounded-circle text-success">
                                    <i class="fas fa-wallet fa-lg"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Action -->
                <div class="card border-0 shadow-sm p-4">
                    <div class="d-flex align-items-center justify-content-between flex-wrap gap-3">
                        <div>
                            <h5 class="fw-bold mb-1">Butuh Menambah Stok?</h5>
                            <p class="text-muted mb-0 small">Tambahkan data produk baru ke inventaris Anda sekarang.</p>
                        </div>
                        <a th:href="@{/products/create}" class="btn btn-primary px-4 rounded-pill">
                            <i class="fas fa-plus-circle me-2"></i>Tambah Produk Baru
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script></script>
</body>
</html>